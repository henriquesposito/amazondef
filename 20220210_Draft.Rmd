---
title: "How is the Brazilian Amazon constructed as a problem at different levels? Amazonian
  Narratives in Presidential Speeches since 1985"
author:
- Henrique Sposito^[Phd Candidate, The Graduate Institute Geneva, henrique.sposito@graduateinstitute.ch]
- Livio Silva-Muller^[Phd Candidate, The Graduate Institute Geneva, livio.silva@graduateinstitute.ch]
date: "11/11/2021"
output:
  html_document:
    df_print: paged
  pdf_document: default
bibliography: [export-data.bib]
csl: [apa.csl]

---

# questions/to do

- Amazon context data up to date?
- Can we copy location stuff from previous set?
- Start improving dictionary: prepare sheet with large random sample of classified amazonian context for inductive analysis (speaker, year, context, classification)

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(dplyr)
library(stringi)
library(tm)
library(ggplot2)
library(tidytext)
library(kableExtra)
library(stringr)
library(wordcloud)
library(RColorBrewer)
library(tidyr)
library(formatR)


# Load data
BR_Presidential_Speeches <- readRDS("data/BR_Presidential_Speeches.Rds")
amazon_def_year <- readRDS("data/amazon_def_year.Rds")
Amazon_speeches <- readRDS("data/amazon_speeches.rds")

```

```{r cleaning and transforming in corpus II, include=FALSE}
# Rename variables to adapt to text analysis packages' expectations
Amazon_speeches <- dplyr::rename(Amazon_speeches, fulltext = text, text = ccontext)


```

```{r narratives dictionary, warning=FALSE, message=FALSE, echo=TRUE}

# Create the dictionary

sovereignty <- ("amazonia e brasileira|amazonia e nossa|soberania|interesse estrangeiro|
                ocupar|forcas armadas|militar|fronteir|patrimonio|nacional|defesa|exercito|
                dono|nossa")

development <- ("estrada|rodovia|hidroeletrica|desenvolv|balbina|itaipu|
                incentivos fiscais| integrar|integracao|zona franca|transamazonica|madeira|
                porto|madeireira|produz|energia")

conservation <- ("preserv|conserv|determinacao|povos indigenas|indigenas|direitos humanos|
                 areas demarcadas|queimada|sustentav|meio ambiente|florest|cooperaÃ§ao|
                 protecao|proteg")

# Create a variable for each and count matches
Amazon_speeches$sovereignty <- stringr::str_count(Amazon_speeches$text, paste0("(?i)", sovereignty))
Amazon_speeches$development <- stringr::str_count(Amazon_speeches$text, paste0("(?i)", development))
Amazon_speeches$conservation <- stringr::str_count(Amazon_speeches$text, paste0("(?i)", conservation))

Amazon_speeches$other <- ifelse(Amazon_speeches$sovereignty == 0 & Amazon_speeches$development == 0 & 
                                  Amazon_speeches$conservation == 0, 1, 0)

#dat <- Amazon_speeches %>% sample_frac(.1)
#dat <- apply(dat,2,as.character)
#write.csv(dat, file = "random_sample.csv")

```
